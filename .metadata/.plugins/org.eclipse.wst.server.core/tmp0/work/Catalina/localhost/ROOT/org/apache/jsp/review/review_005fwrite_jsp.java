/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.86
 * Generated at: 2024-05-17 04:23:25 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.review;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import user.review.UserReviewDAO;
import admin.review.ReviewBoardVO;
import java.util.List;
import java.sql.SQLException;

public final class review_005fwrite_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  public java.lang.String getServletInfo() {
    return "게시판 글 작성";
  }

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(2);
    _jspx_dependants.put("/WEB-INF/lib/standard.jar", Long.valueOf(1715869714055L));
    _jspx_dependants.put("jar:file:/C:/dev/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/online-shop/WEB-INF/lib/standard.jar!/META-INF/c.tld", Long.valueOf(1098678690000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.LinkedHashSet<>(4);
    _jspx_imports_classes.add("user.review.UserReviewDAO");
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("java.sql.SQLException");
    _jspx_imports_classes.add("admin.review.ReviewBoardVO");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    if (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSP들은 오직 GET, POST 또는 HEAD 메소드만을 허용합니다. Jasper는 OPTIONS 메소드 또한 허용합니다.");
        return;
      }
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write('\r');
      out.write('\n');
      out.write('\r');
      out.write('\n');

String userId = (String) session.getAttribute("userId");


if (userId == null) {
    System.out.println("로그인이 필요합니다. ");

      out.write("\r\n");
      out.write("    <script type=\"text/javascript\">\r\n");
      out.write("        alert('로그인이 필요합니다.');\r\n");
      out.write("        window.location.href = '../user/login/userLogin.jsp'; // 경로 수정 필요\r\n");
      out.write("\r\n");
      out.write("    </script>\r\n");

    return;
}

      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("	");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "../assets/jsp/user/lib.jsp", out, false);
      out.write("\r\n");
      out.write("	<!-- golgolz start -->\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"https://img.echosting.cafe24.com/editors/froala/css/froala_style_ec.min.css?vs=2404251303\" charset=\"utf-8\"/>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"https://insideobject.com/ind-script/optimizer.php?filename=nZExDgIxDAT7KC3vsOAJPIEfOMFwJxJv5DgS_J6jggYJ0o52doulBVVofzBqhqtxJZOOYVko904Xgzpl1AqNG9jRL3nJoaMMX6Eh4T4pDvfZ0cIPsTnVORWZVNFCWVVCYtWv-9waHcF2ptNn3YZjeuGYCvJtVjZpMP_Pft_7BA&type=css&k=ecd691e0c80070ef935d0e961272742f67437a3c&t=1681776733\"  />\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"https://insideobject.com/ind-script/optimizer_user.php?filename=tZRNbgMhDIX3M932HE5U5R6VegJgnMGKwQjDpLl9aVL1Z9uBHcboe9bTw-AlIKCbq2JWYDojG3t4ORwhVcvkZl8Cgy44L6i0RtALxeMJnCoEWSojWDF5gWumgq_GXcyKT637DP9Fs7lJLWCNkrvrOAlBYmfo46IzFN3UCpwqDQIXES6UBtE98ih0yi0sbpTfyawUTcFRrhs7iGxrKd2j_Q2X93GG8Ciz2zO3D72cWSRD4tpS0aop40Z4_TkNmrw1MO9j_1qrXzKhtg-vXtKbp5Qorr0FnMStMUhi2ul7kIxxuz00eiztv0DVT9oH&type=css&k=2ac0432e370996de85bc64830c9b818c88b32f75&t=1678165953&user=T\"  />\r\n");
      out.write("\r\n");
      out.write("<link rel=\"canonical\" href=\"https://insideobject.com/board/product/write.html\" />\r\n");
      out.write("<link rel=\"alternate\" href=\"https://m.insideobject.com/board/product/write.html\" />\r\n");
      out.write("	<!-- golgolz end -->\r\n");
      out.write("  \r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write("	#wrap{width: 1462px; height:749; margin:0px auto;}\r\n");
      out.write("\r\n");
      out.write("	    	\r\n");
      out.write("</style>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("	$(function(){\r\n");
      out.write("	    $(\"#btnList\").click(function () {\r\n");
      out.write("	        history.back();\r\n");
      out.write("	    });//click\r\n");
      out.write("	    $(\"#btnWrite\").click(function () {\r\n");
      out.write("	    	var title=document.getElementById(\"title\").value;\r\n");
      out.write("	    	/* alert(title); */\r\n");
      out.write("	        $(\"#frmWrite\").submit();\r\n");
      out.write("	    });//click\r\n");
      out.write("	});//ready\r\n");
      out.write("	\r\n");
      out.write("	function chkNull() {\r\n");
      out.write("	    if($(\"#title\").val().trim() == \"\") {\r\n");
      out.write("	        alert(\"글 제목은 필수입력\");\r\n");
      out.write("	        $(\"#title\").focus();\r\n");
      out.write("	        return;\r\n");
      out.write("	    }//end if\r\n");
      out.write("	    if($(\"#content\").val().trim() == \"\") {\r\n");
      out.write("	        alert(\"내용은 필수입력\");\r\n");
      out.write("	        $(\"#content\").focus();\r\n");
      out.write("	        return;\r\n");
      out.write("	    }//end if\r\n");
      out.write("	    if($(\"#cnt\").val().trim() == \"\") {\r\n");
      out.write("	        $(\"#cnt\").val(0);\r\n");
      out.write("	    }\r\n");
      out.write("	\r\n");
      out.write("	    $(\"#frmWrite\").submit();\r\n");
      out.write("	\r\n");
      out.write("	}//chkNull\r\n");
      out.write("</script>\r\n");
      out.write("<script>\r\n");
      out.write("$(function(){\r\n");
      out.write("	\r\n");
      out.write("      $('#content').summernote({\r\n");
      out.write("        placeholder: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.loginData.id}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("님 글을 작성하세요',\r\n");
      out.write("        tabsize: 2,\r\n");
      out.write("        width:600,\r\n");
      out.write("        height: 200,\r\n");
      out.write("        toolbar: [\r\n");
      out.write("          ['style', ['style']],\r\n");
      out.write("          ['font', ['bold', 'underline', 'clear']],\r\n");
      out.write("          ['color', ['color']],\r\n");
      out.write("          ['para', ['ul', 'ol', 'paragraph']],\r\n");
      out.write("          ['table', ['table']],\r\n");
      out.write("          ['insert', ['link', 'picture', 'video']],\r\n");
      out.write("          ['view', ['fullscreen', 'codeview', 'help']]\r\n");
      out.write("        ]\r\n");
      out.write("      });//summernote\r\n");
      out.write("})//ready\r\n");
      out.write("    </script>\r\n");
      out.write("</head>\r\n");
      out.write("<body>	\r\n");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "../assets/jsp/user/header.jsp", out, false);
      out.write("\r\n");
      out.write("	<div id=\"wrap\">\r\n");
      out.write("		<div id=\"main\">\r\n");
      out.write("			<!-- golgolz start -->\r\n");
      out.write("			<div>\r\n");
      out.write("<hr class=\"layout\"/>\r\n");
      out.write("    \r\n");
      out.write("\r\n");
      out.write("    <div id=\"container\">\r\n");
      out.write("		<div id=\"contents\">\r\n");
      out.write("		\r\n");
      out.write("	");

	request.setCharacterEncoding("UTF-8");
	
      out.write('\r');
      out.write('\n');
      admin.review.SearchVO sVO = null;
      sVO = (admin.review.SearchVO) _jspx_page_context.getAttribute("sVO", javax.servlet.jsp.PageContext.PAGE_SCOPE);
      if (sVO == null){
        sVO = new admin.review.SearchVO();
        _jspx_page_context.setAttribute("sVO", sVO, javax.servlet.jsp.PageContext.PAGE_SCOPE);
      }
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.introspect(_jspx_page_context.findAttribute("sVO"), request);
      out.write('\r');
      out.write('\n');
      admin.review.ReviewBoardVO rVO = null;
      rVO = (admin.review.ReviewBoardVO) _jspx_page_context.getAttribute("rVO", javax.servlet.jsp.PageContext.PAGE_SCOPE);
      if (rVO == null){
        rVO = new admin.review.ReviewBoardVO();
        _jspx_page_context.setAttribute("rVO", rVO, javax.servlet.jsp.PageContext.PAGE_SCOPE);
      }
      out.write('\r');
      out.write('\n');
      org.apache.jasper.runtime.JspRuntimeLibrary.introspect(_jspx_page_context.findAttribute("rVO"), request);
      out.write('\r');
      out.write('\n');
      out.write('	');

	
	String code=request.getParameter("code");
	String cartId=request.getParameter("cartId");
			
	try{
	    UserReviewDAO rDAO=UserReviewDAO.getInstance();
	    /* //
	    String userId="lee";
	    session.setAttribute("userId", userId);
	    // */
	    /* String userId2=(String)session.getAttribute("userId"); */
	   	
	    
	    rVO.setCode(code);
	    //rbVO.setCartId("20240419131320");
	    rVO.setCartId(cartId);
	    //rbVO.setCode("SAMSUNG_S24_1");
	    
	    ReviewBoardVO rbVO2=rDAO.selectImgName(rVO);
	    String defaultImg=rbVO2.getDefaultImg();
	    String name=rbVO2.getName();
	    
	    
      out.write("\r\n");
      out.write("		\r\n");
      out.write("<div class=\"titleArea\">\r\n");
      out.write("            <h2><font color=\"#555555\">REVIEW</font></h2>\r\n");
      out.write("            <p>상품 사용후기입니다.</p>\r\n");
      out.write("        </div>\r\n");
      out.write("</div>\r\n");
      out.write("<form id=\"frmWrite\" name=\"frmWrite\" action=\"review_write_process.jsp\" method=\"get\" target=\"_self\" enctype=\"multipart/form-data\" >\r\n");
      out.write("<input id=\"board_no\" name=\"board_no\" value=\"4\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"product_no\" name=\"product_no\" value=\"6027\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"move_write_after\" name=\"move_write_after\" value=\"/product/detail.html?board_no=4&amp;product_no=6027&amp;cate_no=428&amp;display_group=1&amp;keyword=\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"cate_no\" name=\"cate_no\" value=\"428\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"bUsePassword\" name=\"bUsePassword\" value=\"\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"order_id\" name=\"order_id\" value=\"\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"is_post_checked\" name=\"is_post_checked\" value=\"\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"isExceptBoardUseFroalaImg\" name=\"isExceptBoardUseFroalaImg\" value=\"\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"isGalleryBoard\" name=\"isGalleryBoard\" value=\"\" type=\"hidden\"  />\r\n");
      out.write("<input id=\"c6\" name=\"c6\" value=\"429218e799694a4b1ce711e01de9690d\" type=\"hidden\"  />\r\n");
      out.write("<input type=\"hidden\" name=\"code\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ rVO.code }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\"/>\r\n");
      out.write("<input type=\"hidden\" name=\"cartId\" value=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${ rVO.cartId }", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\"/>\r\n");

System.out.print("rVO.getCode() : "+rVO.getCode());
System.out.print("rVO.getCartId(): "+rVO.getCartId());

      out.write("\r\n");
      out.write("<div class=\"xans-element- xans-board xans-board-write-4 xans-board-write xans-board-4\">\r\n");
      out.write("<!--\r\n");
      out.write("            $write_success_url = /board/product/list.html\r\n");
      out.write("            $product_select_url = /product/search_board_list.html\r\n");
      out.write("            $order_select_url = /order/search_board_list.html\r\n");
      out.write("            $login_page_url = /member/login.html\r\n");
      out.write("            $deny_access_url = /index.html\r\n");
      out.write("        -->\r\n");
      out.write("</form>\r\n");
      out.write("<div class=\"ec-base-box typeProduct  \">\r\n");
      out.write("            <p class=\"thumbnail\"><a href=\"\"><img id=\"iPrdImg\" src=\"http://localhost/assets/images/goods/");
      //  c:out
      org.apache.taglibs.standard.tag.rt.core.OutTag _jspx_th_c_005fout_005f0 = (org.apache.taglibs.standard.tag.rt.core.OutTag) _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.get(org.apache.taglibs.standard.tag.rt.core.OutTag.class);
      boolean _jspx_th_c_005fout_005f0_reused = false;
      try {
        _jspx_th_c_005fout_005f0.setPageContext(_jspx_page_context);
        _jspx_th_c_005fout_005f0.setParent(null);
        // /review/review_write.jsp(185,104) name = value type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_c_005fout_005f0.setValue( defaultImg );
        int _jspx_eval_c_005fout_005f0 = _jspx_th_c_005fout_005f0.doStartTag();
        if (_jspx_th_c_005fout_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fc_005fout_0026_005fvalue_005fnobody.reuse(_jspx_th_c_005fout_005f0);
        _jspx_th_c_005fout_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_c_005fout_005f0, _jsp_getInstanceManager(), _jspx_th_c_005fout_005f0_reused);
      }
      out.write("\" onerror=\"this.src='//img.echosting.cafe24.com/thumb/75x75.gif'\" alt=\"\"/></a></p>\r\n");
      out.write("            <div class=\"information\" style=\"padding-left:30px\">\r\n");
      out.write("				<h3><a href=\"#void\" id=\"aPrdNameLink\">\r\n");
      out.write("				<span id=\"sPrdName\">");
      out.print( name );
      out.write("</span></a></h3>\r\n");
      out.write("                <!-- <p class=\"price\"><span id=\"sPrdPrice\">6,500원</span> <span id=\"sPrdTaxText\"></span></p> -->\r\n");
      out.write("                <p class=\"button\">\r\n");
      out.write("                    <!-- <span id=\"iPrdView\" class=\"\"><a href=\"https://insideobject.com/product/detail.html?product_no=6027\" id=\"aPrdLink\" class=\"btnEm\" target=\"_blank\">상품상세보기</a></span>\r\n");
      out.write("                    <span class=\"displaynone\"><a href=\"#none\" class=\"btnNormal\" onclick=\"BOARD_WRITE.product_popup('/product/search_board_list.html')\">상품정보선택</a></span>\r\n");
      out.write("                    <span class=\"\"><a href=\"#none\" class=\"btnNormal\" onclick=\"BOARD_WRITE.product_popup('/order/search_board_list.html')\">주문상품선택</a></span> -->\r\n");
      out.write("                </p>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("<div class=\"ec-base-table typeWrite \">\r\n");
      out.write("            <table border=\"1\" summary=\"\">\r\n");
      out.write("<caption>글쓰기 폼</caption>\r\n");
      out.write("            <colgroup>\r\n");
      out.write("<col style=\"width:130px;\"/>\r\n");
      out.write("<col style=\"width:auto;\"/>\r\n");
      out.write("</colgroup>\r\n");
      out.write("<tbody>\r\n");
      out.write("<tr>\r\n");
      out.write("<th scope=\"row\">제목</th>\r\n");
      out.write("                    <td> <input id=\"title\" name=\"title\" fw-filter=\"isFill\" fw-label=\"제목\" fw-msg=\"\" class=\"inputTypeText\" placeholder=\"\" value=\"\" maxLength=\"125\" type=\"text\"  />  </td>\r\n");
      out.write("                </tr>\r\n");
      out.write("<tr>\r\n");
      out.write("<td colspan=\"2\" class=\"clear\">\r\n");
      out.write("                        \r\n");
      out.write("            <!-- CSS -->\r\n");
      out.write("            <link rel=\"stylesheet\" href=\"https://img.echosting.cafe24.com/editors/froala/3.2.2/css/froala_editor.pkgd.min.css?vs=2404180600\">\r\n");
      out.write("            <link rel=\"stylesheet\" href=\"https://img.echosting.cafe24.com/editors/froala/css/themes/ec_froala.css?vs=2404180600\">\r\n");
      out.write("\r\n");
      out.write("            <!-- HTML -->\r\n");
      out.write("            <textarea style=\"width: 100%;\" name=\"content\" id=\"content\" class=\"ec-fr-never-be-duplicated\"></textarea>\r\n");
      out.write("                <input type=\"hidden\" id=\"content_hidden\" fw-filter=\"isSimplexEditorFill\" fw-label=\"내용\" value=\"EC_FROALA_INSTANCE\" />\r\n");
      out.write("                \r\n");
      out.write("            <!-- JavaScript -->\r\n");
      out.write("            <script type=\"text/javascript\" src=\"https://img.echosting.cafe24.com/editors/froala/js/polyfill.min.js?vs=2404180600\"></script>\r\n");
      out.write("            <script type=\"text/javascript\" src=\"https://img.echosting.cafe24.com/editors/froala/3.2.2/js/froala_editor.pkgd.min.js?vs=2404180600\"></script>\r\n");
      out.write("            <script type=\"text/javascript\" src=\"https://img.echosting.cafe24.com/editors/froala/js/i18n/ko_KR.js?vs=2404180600\"></script>\r\n");
      out.write("        \r\n");
      out.write("            <script>\r\n");
      out.write("                if (FroalaEditor.PLUGINS && FroalaEditor.PLUGINS.url) delete FroalaEditor.PLUGINS.url; // ECHOSTING-518735\r\n");
      out.write("            </script>\r\n");
      out.write("        \r\n");
      out.write("            <!-- Run Froala Script -->\r\n");
      out.write("            <script>\r\n");
      out.write("              var EC_FROALA_ID = null;\r\n");
      out.write("              // isSimplexEditorFill 체크시에 필요함\r\n");
      out.write("              var EC_FROALA_INSTANCE = null;\r\n");
      out.write("              // scroll 버그 대응을 위해 필요.\r\n");
      out.write("              var fScrollPosition = 0;\r\n");
      out.write("              // 다중 이미지 삽입시 생기는 버그 대응\r\n");
      out.write("              var iCheckedImageListCount  = 0;\r\n");
      out.write("              var aCheckedImageList = [];\r\n");
      out.write("              var aInsertedImageList = [];\r\n");
      out.write("              var isBeforeImageRemove = false;\r\n");
      out.write("              \r\n");
      out.write("              (function() {\r\n");
      out.write("                var d = \"\";\r\n");
      out.write("                try {\r\n");
      out.write("                    var o = {\"key\":\"DUA2yF3G1E1A5A2A2pZGCTRSAPJWTLPLZHTQQe1JGZxC4B3A3E2B5A1E1E4I1C2==\",\"toolbarSticky\":false,\"theme\":\"ec-froala\",\"attribution\":false,\"htmlRemoveTags\":[\"script\"],\"htmlAllowedEmptyTags\":[\"*\"],\"iframe\":true,\"iframeStyle\":\".fr-view{font-size: 12px;}\",\"iframeStyleFiles\":[\"\\/\\/img.echosting.cafe24.com\\/editors\\/froala\\/css\\/froala_style.min.css?vs=2404171300\"],\"heightMin\":400,\"language\":\"ko_KR\",\"paragraphFormatSelection\":true,\"fontFamilySelection\":true,\"fontSize\":[\"8\",\"9\",\"10\",\"12\",\"14\",\"16\",\"18\",\"20\",\"22\",\"24\",\"26\",\"28\",\"30\"],\"fontSizeSelection\":true,\"linkInsertButtons\":[\"linkBack\"],\"quickInsertButtons\":[\"ul\",\"ol\",\"hr\"],\"codeMirror\":false,\"entities\":\"&#60;&#62;\",\"imageEditButtons\":[\"imageAlign\",\"imageRemove\",\"|\",\"imageLink\",\"linkOpen\",\"linkEdit\",\"linkRemove\",\"-\",\"imageDisplay\",\"imageStyle\",\"imageAlt\",\"imageSize\"],\"tableEditButtons\":[],\"tableInsertHelper\":false,\"imageDefaultMargin\":0,\"imageDefaultWidth\":0,\"imageUpload\":false,\"imageInsertButtons\":[\"imageUpload\"],\"imageMaxSize\":5242880,\"filesManagerMaxSize\":5242880,\"toolbarButtons\":{\"moreText\":{\"buttons\":[\"paragraphFormat\",\"fontFamily\",\"fontSize\",\"bold\",\"italic\",\"underline\",\"strikeThrough\",\"textColor\",\"backgroundColor\",\"subscript\",\"superscript\",\"clearFormatting\"],\"buttonsVisible\":5},\"moreParagraph\":{\"buttons\":[\"formatOL\",\"formatUL\",\"alignLeft\",\"alignCenter\",\"alignRight\",\"outdent\",\"indent\",\"alignJustify\",\"lineHeight\"],\"buttonsVisible\":5},\"moreRich\":{\"buttons\":[\"insertTable\",\"insertHR\",\"emoticons\",\"specialCharacters\"],\"buttonsVisible\":0},\"moreMisc\":{\"buttons\":[\"undo\",\"redo\",\"fullscreen\",\"html\",\"print\",\"spellChecker\",\"selectAll\"],\"align\":\"right\",\"buttonsVisible\":2}},\"toolbarButtonsSM\":{\"moreText\":{\"buttons\":[\"paragraphFormat\",\"fontFamily\",\"fontSize\",\"bold\",\"italic\",\"underline\",\"strikeThrough\",\"textColor\",\"backgroundColor\",\"subscript\",\"superscript\",\"clearFormatting\"],\"buttonsVisible\":4},\"moreParagraph\":{\"buttons\":[\"formatOL\",\"formatUL\",\"alignLeft\",\"alignCenter\",\"alignRight\",\"outdent\",\"indent\",\"alignJustify\",\"lineHeight\"],\"buttonsVisible\":2},\"moreRich\":{\"buttons\":[\"insertTable\",\"insertHR\",\"emoticons\",\"specialCharacters\"],\"buttonsVisible\":0},\"moreMisc\":{\"buttons\":[\"undo\",\"redo\",\"fullscreen\",\"html\",\"print\",\"spellChecker\",\"selectAll\"],\"align\":\"right\",\"buttonsVisible\":2}},\"toolbarButtonsXS\":{\"moreText\":{\"buttons\":[\"paragraphFormat\",\"textColor\",\"backgroundColor\",\"bold\",\"italic\",\"underline\",\"strikeThrough\"],\"buttonsVisible\":1},\"moreParagraph\":{\"buttons\":[\"formatOL\",\"formatUL\",\"alignLeft\",\"alignCenter\",\"alignRight\"],\"buttonsVisible\":0},\"moreRich\":{\"buttons\":[\"insertLink\"]},\"moreMisc\":{\"buttons\":[\"undo\",\"redo\",\"html\"],\"buttonsVisible\":0,\"align\":\"right\"}},\"htmlDoNotWrapTags\":[\"script\",\"style\",\"meta\",\"link\"],\"htmlAllowedStyleProps\":[\".*\"],\"htmlAllowedTags\":[\".*\"],\"htmlAllowedAttrs\":[\".*\"],\"fontFamily\":{\"Dotum,sans-serif\":\"Dotum\",\"Gulim,sans-serif\":\"Gulim\",\"Batang,sans-serif\":\"Batang\",\"Gungsuh,sans-serif\":\"Gungsuh\",\"Arial,Helvetica,sans-serif\":\"Arial\",\"Tahoma,Geneva,sans-serif\":\"Tahoma\",\"Verdana,Geneva,sans-serif\":\"Verdana\",\"Fixedsys,sans-serif\":\"Fixedsys\",\"'Times New Roman',Times,serif\":\"Times New Roman\",\"helvetica,sans-serif\":\"Helvetica\",\"sans-serif\":\"Sans-serif\",\"palatino,sans-serif\":\"Palatino\",\"'Comic Sans MS',sans-serif\":\"Comic Sans MS\",\"sand,sans-serif\":\"Sand\",\"'Courier New',sans-serif\":\"Courier New\",\"courier,sans-serif\":\"Courier\",\"monospace,sans-serif\":\"Monospace\",\"Georgia,serif\":\"Georgia\",\"SimSun,sans-serif\":\"SimSun\",\"SimHei,sans-serif\":\"SimHei\",\"'MS PGothic',sans-serif\":\"MS PGothic\",\"'MS PMincho',sans-serif\":\"MS PMincho\",\"'MS UI PGothic',sans-serif\":\"MS UI PGothic\",\"Meiryo,sans-serif\":\"Meiryo\"},\"colorsText\":[\"#FF0000\",\"#FF6C00\",\"#FFAA00\",\"#FFEF00\",\"#A6CF00\",\"#009E25\",\"#00B0A2\",\"#0075C8\",\"#3A32C3\",\"#7820B9\",\"#EF007C\",\"#000000\",\"#252525\",\"#464646\",\"#636363\",\"#7D7D7D\",\"#9A9A9A\",\"#FFE8E8\",\"#F7E2D2\",\"#F5EDDC\",\"#F5F4E0\",\"#EDF2C2\",\"#DEF7E5\",\"#D9EEEC\",\"#C9E0F0\",\"#D6D4EB\",\"#E7DBED\",\"#F1E2EA\",\"#ACACAC\",\"#C2C2C2\",\"#CCCCCC\",\"#E1E1E1\",\"#EBEBEB\",\"#FFFFFF\",\"#E97D81\",\"#E19B73\",\"#D1B274\",\"#CFCCA2\",\"#61B977\",\"#53AEA8\",\"#518FBB\",\"#6A65BB\",\"#9A54CE\",\"#E573AE\",\"#5A504B\",\"#767B86\",\"#951015\",\"#6E391A\",\"#785C25\",\"#5F5B25\",\"#4C511F\",\"#1C4827\",\"#0D514C\",\"#1B496A\",\"#2B285F\",\"#45245B\",\"#721947\",\"#352E2C\",\"#3C3F45\"],\"colorsBackground\":[\"#FF0000\",\"#FF6C00\",\"#FFAA00\",\"#FFEF00\",\"#A6CF00\",\"#009E25\",\"#00B0A2\",\"#0075C8\",\"#3A32C3\",\"#7820B9\",\"#EF007C\",\"#000000\",\"#252525\",\"#464646\",\"#636363\",\"#7D7D7D\",\"#9A9A9A\",\"#FFE8E8\",\"#F7E2D2\",\"#F5EDDC\",\"#F5F4E0\",\"#EDF2C2\",\"#DEF7E5\",\"#D9EEEC\",\"#C9E0F0\",\"#D6D4EB\",\"#E7DBED\",\"#F1E2EA\",\"#ACACAC\",\"#C2C2C2\",\"#CCCCCC\",\"#E1E1E1\",\"#EBEBEB\",\"#FFFFFF\",\"#E97D81\",\"#E19B73\",\"#D1B274\",\"#CFCCA2\",\"#61B977\",\"#53AEA8\",\"#518FBB\",\"#6A65BB\",\"#9A54CE\",\"#E573AE\",\"#5A504B\",\"#767B86\",\"#951015\",\"#6E391A\",\"#785C25\",\"#5F5B25\",\"#4C511F\",\"#1C4827\",\"#0D514C\",\"#1B496A\",\"#2B285F\",\"#45245B\",\"#721947\",\"#352E2C\",\"#3C3F45\"],\"docId\":\"content\"};\r\n");
      out.write("                    // IE tableEditbuttons 이슈\r\n");
      out.write("                    o[\"tableEditButtons\"] = FroalaEditor.DEFAULTS.tableEditButtons.filter(function(tableEditButtonName) {\r\n");
      out.write("                        return tableEditButtonName.indexOf(\"Style\") === -1;\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                    o[\"events\"] = {\r\n");
      out.write("                        \"filesManager.beforeUpload\": function(files) {\r\n");
      out.write("                            this.opts.filesManagerUploadURL = getConvertUrlBeforeUpload(this.opts.filesManagerUploadURL);\r\n");
      out.write("                        },\r\n");
      out.write("                        \"image.beforeUpload\": function(images) {\r\n");
      out.write("                            this.opts.imageUploadURL = getConvertUrlBeforeUpload(this.opts.imageUploadURL);\r\n");
      out.write("                        },\r\n");
      out.write("\r\n");
      out.write("                        \"image.inserted\": function(oImage, response) {\r\n");
      out.write("                            var sInstanceId = \"content\";\r\n");
      out.write("                            // 파일업로더로 이미지가 넘어오는경우에는 itslog가 이미 생성된 이미지기때문에 처리하지않음.\r\n");
      out.write("                            if ((sInstanceId === \"product_description\" || sInstanceId === \"product_description_mobile\") && typeof response !== \"undefined\") {\r\n");
      out.write("                                oImage.attr(\"data-use_its\", true);\r\n");
      out.write("                            }\r\n");
      out.write("                           \r\n");
      out.write("                            if (iCheckedImageListCount >= 0) {\r\n");
      out.write("                                iCheckedImageListCount++;\r\n");
      out.write("                                aInsertedImageList.push(oImage);\r\n");
      out.write("                                \r\n");
      out.write("                                if (aCheckedImageList.length === iCheckedImageListCount || aCheckedImageList.length === 0) {\r\n");
      out.write("                                    // 마지막 이미지\r\n");
      out.write("                                    for (var i = 0; i < aInsertedImageList.length; i++) {\r\n");
      out.write("                                        aInsertedImageList[i].after(\"<br>\");\r\n");
      out.write("                                    }\r\n");
      out.write("                                    \r\n");
      out.write("                                    // 리셋\r\n");
      out.write("                                    iCheckedImageListCount = 0;\r\n");
      out.write("                                    aCheckedImageList = [];\r\n");
      out.write("                                    aInsertedImageList = [];\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"image.error\": function (error, response) {\r\n");
      out.write("                            if (typeof JSON != \"undefined\") {\r\n");
      out.write("                                r = JSON.parse(response);\r\n");
      out.write("                                alert(r[\"error\"]);\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"image.loaded\": function($img) {\r\n");
      out.write("                            // IE에서 이미지 로드 후, 커서 위치 재조정\r\n");
      out.write("                            if (/(trident).+rv[:\\s]([\\w\\.]{1,9}).+like\\sgecko/i.test(navigator.userAgent)) {\r\n");
      out.write("                                var _this = this;\r\n");
      out.write("                                var _img = $img[0];\r\n");
      out.write("                                setTimeout(function() {\r\n");
      out.write("                                  _this.selection.setAfter(_img);\r\n");
      out.write("                                  _this.selection.restore();\r\n");
      out.write("                                }, 300);\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"filesManager.error\": function (error, response) {\r\n");
      out.write("                            if (typeof JSON != \"undefined\") {\r\n");
      out.write("                                r = JSON.parse(response);\r\n");
      out.write("                                alert(r[\"error\"]);\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"commands.before\": function(sCommand) {\r\n");
      out.write("                            // 코드뷰 토글시\r\n");
      out.write("                            if (sCommand === \"html\") {\r\n");
      out.write("                                var sContent = this.el.innerHTML;\r\n");
      out.write("                                sContent = sContent.replace(/<\\/?null>/gi, \"\");\r\n");
      out.write("                                this.el.innerHTML = getReplaceZeroWidthSpace(sContent);\r\n");
      out.write("                                replaceToFroalaNewLine(this);\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            // 전체화면 모드 켜기\r\n");
      out.write("                            if (sCommand === \"fullscreen\" && !this.fullscreen.isActive()) {\r\n");
      out.write("                                this.$box[0].setAttribute(\"data-window-scroll-y\", window.scrollY || window.pageYOffset);\r\n");
      out.write("                            }\r\n");
      out.write("                            // 다중 이미지 삽입\r\n");
      out.write("                            if (sCommand === \"insertAll\") {\r\n");
      out.write("                                var popup = this.popups.get(\"filesManager.insert\");\r\n");
      out.write("                                aCheckedImageList = popup.find(\".fr-files-checkbox .fr-file-insert-check:checked\")\r\n");
      out.write("                            }\r\n");
      out.write("\r\n");
      out.write("                            if (sCommand === \"insertSpecialCharacter\") {\r\n");
      out.write("                                setScrollPosition(this, getIframeCursorPoint(this));\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"commands.after\": function(sCommand) {\r\n");
      out.write("                            if (sCommand === \"html\") {\r\n");
      out.write("                                removeFroalaNewLine(this);\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            if (sCommand === \"insertFiles\") {\r\n");
      out.write("                                var enableButton= document.querySelector(\".fr-trim-button.fr-plugins-enable\");\r\n");
      out.write("                                if (enableButton) enableButton.click();\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            if (sCommand === \"selectAll\") {\r\n");
      out.write("                                this.el.focus();\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            // 전체 화면 토글시에 컨텐츠 높이를 정상적으로 반영하지못하는 이슈 대응\r\n");
      out.write("                            if (sCommand === \"fullscreen\") {\r\n");
      out.write("                                var _this = this;\r\n");
      out.write("                                setTimeout(function() {\r\n");
      out.write("                                    _this.size.syncIframe();\r\n");
      out.write("                                }, 300);\r\n");
      out.write("                                \r\n");
      out.write("                                if (this.fullscreen.isActive() === false) {\r\n");
      out.write("                                    window.scrollTo(0, this.$box[0].getAttribute(\"data-window-scroll-y\"));\r\n");
      out.write("                                }\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            if (sCommand === \"insertSpecialCharacter\") {\r\n");
      out.write("                                this.$wp.get(0).scrollTop = fScrollPosition;\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"focus\": function() {\r\n");
      out.write("                            if (this.iframe_document) {\r\n");
      out.write("                                var iframeHeight = this.iframe_document.body.scrollHeight;\r\n");
      out.write("                                this.$iframe[0].style.height = iframeHeight + \"px\";\r\n");
      out.write("                            }\r\n");
      out.write("                            \r\n");
      out.write("                            this.el.innerHTML = getReplaceZeroWidthSpace(this.el.innerHTML);\r\n");
      out.write("                        },\r\n");
      out.write("\r\n");
      out.write("                        \"image.beforeRemove\": function(aImage) {\r\n");
      out.write("                            isBeforeImageRemove = true;\r\n");
      out.write("                            var cursorPoint = aImage[0].offsetTop; // 제거 대상 이미지의 offsetTop 값으로 정의\r\n");
      out.write("                            setScrollPosition(this, cursorPoint);\r\n");
      out.write("                        },\r\n");
      out.write("                        \"image.removed\": function() {\r\n");
      out.write("                            if (isBeforeImageRemove === true) {\r\n");
      out.write("                                this.$wp.get(0).scrollTop = fScrollPosition; // 에디터 자체 버그동작이 수행 된 후 계산 해 둔 값으로 스크롤 위치를 이동\r\n");
      out.write("                            }\r\n");
      out.write("                            isBeforeImageRemove = false;\r\n");
      out.write("                        },\r\n");
      out.write("                        \"keydown\": function(e) {\r\n");
      out.write("                            if (isScrollFix(this, e) === true) {\r\n");
      out.write("                                setScrollPosition(this, getIframeCursorPoint(this));\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"keyup\": function(e) {\r\n");
      out.write("                            if (isScrollFix(this, e) === true) {\r\n");
      out.write("                                this.$wp.get(0).scrollTop = fScrollPosition;\r\n");
      out.write("                            }\r\n");
      out.write("                        },\r\n");
      out.write("                        \"paste.before\": function() {\r\n");
      out.write("                            if (this.fullscreen.isActive() === false) {\r\n");
      out.write("                                setScrollPosition(this, getIframeCursorPoint(this));\r\n");
      out.write("                            } \r\n");
      out.write("                        },\r\n");
      out.write("                        \"paste.after\": function(e) {\r\n");
      out.write("                            if (this.fullscreen.isActive() === false) {\r\n");
      out.write("                                this.$wp.get(0).scrollTop = fScrollPosition;\r\n");
      out.write("                            } \r\n");
      out.write("                        },\r\n");
      out.write("                        \"codeView.update\": function() {\r\n");
      out.write("                            this.el.innerHTML = getReplaceZeroWidthSpace(this.el.innerHTML);\r\n");
      out.write("                            this.el.innerHTML = decodeUriAttribute(this.el.innerHTML);\r\n");
      out.write("                        }\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE = new FroalaEditor(\"textarea#content.ec-fr-never-be-duplicated\", o, function() {\r\n");
      out.write("                        EC_FROALA_ID = this.id;\r\n");
      out.write("                        if (d != \"\") {\r\n");
      out.write("                            this.el.innerHTML = this.clean.html(d);\r\n");
      out.write("                            // 타겟 textarea 태그에 change 트리거링\r\n");
      out.write("                            this.undo.saveStep();\r\n");
      out.write("                        }\r\n");
      out.write("                        var script = document.createElement(\"script\");\r\n");
      out.write("                        script.src = \"//img.echosting.cafe24.com/editors/froala/js/polyfill.min.js?vs=2404171300\";\r\n");
      out.write("                        this.$iframe.get(0).contentWindow.document.head.appendChild(script);\r\n");
      out.write("                        if (this.el.innerHTML === \"<br>\") {\r\n");
      out.write("                            this.el.innerHTML = \"<p><br></p>\";\r\n");
      out.write("                        }\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE.$iframe[0].setAttribute(\"id\", \"content\" + \"_IFRAME\");\r\n");
      out.write("                    EC_FROALA_INSTANCE.$iframe[0].contentWindow.document.body.setAttribute(\"id\", \"content\" + \"_BODY\");\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE.isEmptyContent = function () {\r\n");
      out.write("                        var c = getContentFromFroala(this.id);\r\n");
      out.write("                        // 스페이스바만 입력 저장시, validation을 위해 처리\r\n");
      out.write("                        var val = c.replace(/\\<br\\/?\\>|\\<\\/?p\\>|\\s|&nbsp;/gi, \"\");\r\n");
      out.write("                        if (\"\" == val) return true;\r\n");
      out.write("                        return false;\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE.getContentFromFroala = function() {\r\n");
      out.write("                        return getContentFromFroala(this.id);\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE.applyContentToFroala = function(content) {\r\n");
      out.write("                        return applyContentToFroala(content, this.id);\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    EC_FROALA_INSTANCE.setValueBeforeSubmit = function(sSection) {\r\n");
      out.write("                        return setValueBeforeSubmit(sSection, this.id);\r\n");
      out.write("                    };\r\n");
      out.write("\r\n");
      out.write("                    if (typeof $Editor ===  \"undefined\") {\r\n");
      out.write("                        $Editor = {};\r\n");
      out.write("                    }\r\n");
      out.write("                    $Editor[\"content\"] = EC_FROALA_INSTANCE;\r\n");
      out.write("                } catch (e) {\r\n");
      out.write("                    document.getElementById(\"content\").value = d;\r\n");
      out.write("                    console.error(e);\r\n");
      out.write("                } finally {\r\n");
      out.write("                }\r\n");
      out.write("              })();\r\n");
      out.write("              \r\n");
      out.write("              function decodeUriAttribute(content) {\r\n");
      out.write("                  return content.replace(/(?:href=|src=)(?:\"([^\"]+)|'([^']+))[^>]/g, function (match, p1, p2) {\r\n");
      out.write("                      var p = p1 ? p1 : p2;\r\n");
      out.write("                      if (/%20|\\s|%3A/g.test(p)) {\r\n");
      out.write("                          try {\r\n");
      out.write("                              return match.replace(p, decodeURIComponent(p).trim());\r\n");
      out.write("                          } catch (e) {\r\n");
      out.write("                              return match;\r\n");
      out.write("                          }\r\n");
      out.write("                      } else {\r\n");
      out.write("                          return match;\r\n");
      out.write("                      }\r\n");
      out.write("                  });\r\n");
      out.write("              }\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            // 스크롤 위치 수정해야하는지 확인\r\n");
      out.write("            function isScrollFix (oEditor, event) {\r\n");
      out.write("                if (oEditor.fullscreen.isActive() === true) {\r\n");
      out.write("                    return false;\r\n");
      out.write("                }\r\n");
      out.write("                var sKey = event.key.toUpperCase();\r\n");
      out.write("                var bResult = false;\r\n");
      out.write("                if (sKey === \"ENTER\") {\r\n");
      out.write("                    // 구문의 중간 지점의 엔터 입력만 요구 조건에 해당함\r\n");
      out.write("                    bResult = oEditor.selection.get().focusNode !== oEditor.$el.get(0);\r\n");
      out.write("                } else if (sKey === \"BACKSPACE\" || sKey === \"DELETE\") {\r\n");
      out.write("                    bResult = true;\r\n");
      out.write("                }\r\n");
      out.write("                return bResult;\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // 스크롤 위치 수정\r\n");
      out.write("            function setScrollPosition (oEditor, fCursorPoint) {\r\n");
      out.write("                var oContentWrapper = oEditor.$wp.get(0); // 에디터 편집 영역 컨테이너\r\n");
      out.write("                var fStartPoint = oContentWrapper.scrollTop; // 보여지는 편집 영역의 시작 지점\r\n");
      out.write("                var fEndPoint = oContentWrapper.scrollTop + (oContentWrapper.clientHeight - 20); // 보여지는 편집 영역의 끝 지점 (여백 포함)\r\n");
      out.write(" \r\n");
      out.write("                if (fCursorPoint > 0 && fCursorPoint < fStartPoint) {\r\n");
      out.write("                    // 커서가 보여지는 영역보다 위에 위치\r\n");
      out.write("                    fScrollPosition = fCursorPoint;\r\n");
      out.write("                } else if (fCursorPoint > 0 && fCursorPoint > fEndPoint) {\r\n");
      out.write("                    // 커서가 보여지는 영역보다 아래에 위치\r\n");
      out.write("                    fScrollPosition = fCursorPoint - (oContentWrapper.clientHeight - 20); // 여백 포함\r\n");
      out.write("                } else {\r\n");
      out.write("                    // 값이 0 이라서 무효화 됐거나, 보여지는 영역에 있는 경우 - 위치를 그대로 유지\r\n");
      out.write("                    fScrollPosition = fStartPoint;\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // 커서 포인트 반환\r\n");
      out.write("            function getIframeCursorPoint(editor) {\r\n");
      out.write("                var iframeDocument = editor.$iframe.get(0).contentDocument;\r\n");
      out.write("                var anchorNode = iframeDocument.getSelection().anchorNode;\r\n");
      out.write("                var iframeRange = iframeDocument.createRange();\r\n");
      out.write("                iframeRange.selectNode(anchorNode);\r\n");
      out.write("                return iframeRange.getBoundingClientRect().top;\r\n");
      out.write("            }\r\n");
      out.write("   \r\n");
      out.write("            // 폭없는 공백에서 폭과 줄바꿈 없는 공백으로 치환 (폭없는 공백은 플로알라버그로인해 지원하지않음)\r\n");
      out.write("            function getReplaceZeroWidthSpace(sContent) {\r\n");
      out.write("                return sContent.replace(/\\u200B/g, \"&#65279;\");\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            // \\n 제거되는 사양에대한 대응 : 플로알라에서 코드뷰 토글시 줄바꿈되는 태그로 변경\r\n");
      out.write("            function replaceToFroalaNewLine(oEditor) {\r\n");
      out.write("                if (oEditor.codeView.isActive() === true) {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                \r\n");
      out.write("                var oWhiteSpacePreElements = oEditor.$el.get(0).querySelectorAll('*[style*=\"white-space: pre\"], *[style*=\"white-space:pre\"]');\r\n");
      out.write("                for (var iIndex = 0; iIndex < oWhiteSpacePreElements.length; iIndex++) {\r\n");
      out.write("                    oWhiteSpacePreElements[iIndex].innerHTML = oWhiteSpacePreElements[iIndex].innerHTML.replace(/\\n/g, '<span class=\"fr-newline\"></span>');\r\n");
      out.write("                }\r\n");
      out.write("            }            \r\n");
      out.write("            \r\n");
      out.write("            // \\n 제거되는 사양에대한 대응 : 코드뷰 토글시 줄바꿈 태그 \\n으로 변경\r\n");
      out.write("            function removeFroalaNewLine(oEditor) {\r\n");
      out.write("                if (oEditor.codeView.isActive() === false) {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                \r\n");
      out.write("                var sCodeViewValue;\r\n");
      out.write("                if (typeof oEditor.opts.codeMirror === \"function\") {\r\n");
      out.write("                    // 상품 등록/수정 에디터는 코드미러를 사용하기때문에 분기처리\r\n");
      out.write("                    sCodeViewValue = oEditor.$wp.get(0).querySelector(\".CodeMirror\").CodeMirror.getValue();\r\n");
      out.write("                    oEditor.$wp.get(0).querySelector(\".CodeMirror\").CodeMirror.setValue(sCodeViewValue.replace(/<span class=[',\"]fr-newline[',\"]><\\/span>/g, '\\n'));\r\n");
      out.write("                } else {\r\n");
      out.write("                    sCodeViewValue = oEditor.$wp.get(0).querySelector(\".fr-code\").value;\r\n");
      out.write("                    oEditor.$wp.get(0).querySelector(\".fr-code\").value = sCodeViewValue.replace(/<span class=[',\"]fr-newline[',\"]><\\/span>/g, '\\n');\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("            \r\n");
      out.write("            </script>                    </td>\r\n");
      out.write("                </tr>\r\n");
      out.write("</tbody>\r\n");
      out.write("</table>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"ec-base-button \">\r\n");
      out.write("            <span class=\"gRight\">\r\n");
      out.write("                <input type=\"button\" class=\"btnSubmitFix sizeS\" id=\"btnWrite\" value=\"등록\"/>\r\n");
      out.write("                <a href=\"/board/review/4/\" class=\"btnBasicFix sizeS\">취소</a>\r\n");
      out.write("            </span>\r\n");
      out.write("        </div>\r\n");
      out.write("            ");

		}catch (SQLException se){
			se.printStackTrace();
			out.println(".");
		}
	
      out.write("\r\n");
      out.write("</div>\r\n");
      out.write("			<!-- golgolz end -->\r\n");
      out.write("		</div>\r\n");
      out.write("	</div>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
